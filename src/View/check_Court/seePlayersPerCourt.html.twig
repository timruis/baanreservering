{% extends 'UserLogedin.html.twig' %}

{% block title %} IZEW - DASHBOARD{% endblock %}


{% block body %}

    <div class="row w-100">
        <div class="card p-0 col-sm-3" style="overflow-x: scroll; padding: 50px;">
            <div class="card-body p-0">
                <div class="card-title">
                    <h3 class="text-center">Soorten Legenda</h3>
                </div>
                <hr>
                <ol class="list-group w-100">
                    <li class="list-group-item"><h2 style="font-size: 30px;">1. Les</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#0d95e8;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">2. Toss</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#05c5e2;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">3. Competitie</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#ece109;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">4. Event</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#0d23e8;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">5. Verhuur</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#ff790f;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">6. Introduce</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#880ba7;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">7. Tennis Kamp</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#0de823;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">8. Overig</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#727274;"></div></li>
                    <li class="list-group-item"><h2 style="font-size: 30px;">9. reservering</h2> <div class="border-dark" style="height:20px;width:100%;border: 1px black solid;background-color:#e70808;"></div></li>
                </ol>
            </div>
        </div>
        <div class="card col-sm-9" style="overflow-x: scroll; padding: 50px;padding-left: 0px;">
            <h3 id="monthYear" class="pl-5">
                U kijkt nu op
                {% if "now" | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    vandaag
                {% elseif date("+1 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    morgen
                {% elseif date("+2 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    overmorgen
                {% elseif date("+3 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    drie dagen verder
                {% elseif date("+4 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    vier dagen verder
                {% elseif date("+5 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    vijf dagen verder
                {% elseif date("+6 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    zes dagen verder
                {% elseif date("+7 day") | date("d/m/Y") == ChosenDate | date("d/m/Y") %}
                    zeven dagen verder
                {% elseif date("+7 day") | date("d/m/Y") < ChosenDate | date("d/m/Y") %}
                    een dag(en) te ver
                {% endif %}

            </h3>
            <h4 class="pl-5">
                {{ ChosenDate | date("d/m/Y") }}
            </h4>
            <div class="span12">
                <table class="table-condensed table-sticky table-bordered table-striped">
                    <thead>
                    <tr>
                        <th style="z-index: 6;">Tijd</th>
                        {% for c in 1..CourtAmount %}
                        <th>baan {{ c }}</th>
                        {% endfor %}

                    </tr>
                    </thead>
                    <tbody>
                    {% set Previousdate = 0 %}
                    {% set PreviousTime = 0 %}
                    {% for t in times %}
                    <tr>
                        <th> {{ t }}</th>
                        {% for c in 1..CourtAmount %}
                            <td>
                                {% set stringdate = ChosenDate~" "~t~":00" %}
                                {% set date = stringdate|date('U') %}
                                {% if date~c~"b" in allReservations or date~c~"b"~9 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" class="btn btn-danger">bezet</a>  <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>
                                {% elseif date~c~"b"~1 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#0d95e8 !important;" class="btn btn-danger">bezet</a>
                                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_COURT-BLOCKER') %}
                                     <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>
                                    {% endif %}
                                {% elseif date~c~"b"~2 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#05c5e2 !important;" class="btn btn-danger">bezet</a>
                                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_COURT-BLOCKER') %}
                                     <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>
                                    {% endif %}
                                {% elseif date~c~"b"~3 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#ece109 !important;" class="btn btn-danger">bezet</a>
                                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_COURT-BLOCKER') %}
                                     <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>{% endif %}
                                {% elseif date~c~"b"~4 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#0d23e8 !important;" class="btn btn-danger">bezet</a>
                                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_COURT-BLOCKER') %}
                                     <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>{% endif %}
                                {% elseif date~c~"b"~5 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#ff790f !important;" class="btn btn-danger">bezet</a>
                                    <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>
                                {% elseif date~c~"b"~6 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#880ba7 !important;" class="btn btn-danger">bezet</a>
                                    <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>
                                {% elseif date~c~"b"~7 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#0de823 !important;" class="btn btn-danger">bezet</a>
                                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_COURT-BLOCKER') %}
                                     <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>{% endif %}
                                {% elseif date~c~"b"~8 in allReservations %}
                                    <a href="{{ path('check_Court',{time:date,Court:c}) }}" style="background-color:#727274 !important;" class="btn btn-danger">bezet</a>
                                    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_COURT-BLOCKER') %}
                                     <button type="button" id="{{c~date }}" class="DeleteCourt btn btn-danger" data-toggle="modal" data-target="#Delete" data-link="{{ path('DeleteRegisterGame',{time:date,Court:c}) }}">
                                                        Delete <span class="fas fa-times-circle"></span>
                                                    </button>{% endif %}
                                {% elseif Previousdate~c in allReservations %}
                                   <a href="#" class="btn btn-danger">bezet</a>
                                {% else %}
                                    <a class="btn
                                    {% if date(ChosenDate~" 22:30")|date('U') == date or (date(ChosenDate~" 17:30")|date('U') == date and (ChosenDate|date('w') == 0 or ChosenDate|date('w') == 6) )  or date()|date_modify("+365 day") < date(stringdate) or date(stringdate)|date_modify("+30 minute")|date('U')~c in allReservations or date(stringdate) < date() or (date(ChosenDate~sundown) < date(stringdate) and (c==1 or c==2 or c==3 or c==4 or c==7 or c==8 or c==9)) %}
                                        disabled"
                                    {% else %}
                                        " href="{{ path('adminRegisterGame',{time:date,Court:c}) }}"
                                    {% endif %}
                                        >
                                    kies</a>
                                {% endif %}
                            </td>
                            {% set PreviousTime = ChosenDate~" "~t~":00" %}
                        {% endfor %}
                    </tr>
                        {% set Previousdate = PreviousTime|date('U') %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
{% block modals %}
    <div class="modal fade" id="Delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Are you sure</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    If you click delete the object will be permanently be deleted.

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <a class="btn btn-danger" id="modal-link" href="">Delete <span class="fas fa-times-circle"></span></a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $('.DeleteCourt').on('click', function (e) {
            // convert target (e.g. the button) to jquery object
            var $target = $(e.target);

            // modal targeted by the button
            var modalSelector = $target.data('target');
            // retrieve the dom element corresponding to current attribute
            var $modalAttribute = $(modalSelector + ' #modal-link');
            var dataValue = $target.data('link');
            $modalAttribute.attr('href', dataValue);
        });

    </script>

{% endblock %}
